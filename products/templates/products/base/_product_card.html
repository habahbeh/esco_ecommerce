{% load i18n static %}
{% load humanize %}

<!-- File: products/templates/products/base/_product_card.html -->
<!-- بطاقة منتج بتصميم مشابه لموقع أمازون -->

{% load i18n static %}
{% load humanize %}

<!-- File: products/templates/products/base/_product_card.html -->
<!-- بطاقة منتج بتصميم مشابه لبطاقة الفعاليات -->

<div class="card product-card h-100">
    {% if product.is_new %}
        <div class="product-badge-new">{% trans "جديد" %}</div>
    {% elif product.is_featured %}
        <div class="product-badge-featured">{% trans "مميز" %}</div>
    {% elif product.has_discount %}
        <div class="product-badge-sale">-{{ product.discount_percentage }}%</div>
    {% endif %}

    {% if product.default_image %}
        <img src="{{ product.default_image.image.url }}" class="card-img-top" alt="{{ product.name }}">
    {% else %}
        <div class="no-image card-img-top d-flex align-items-center justify-content-center">
            <i class="far fa-image fa-3x text-muted"></i>
        </div>
    {% endif %}

    <div class="card-body">
        <h3 class="card-title">{{ product.name }}</h3>
        <div class="product-details">
            <div class="product-info">
                <i class="fas fa-tag"></i>
                <span>{{ product.current_price|floatformat:2 }} {% trans "د.أ" %}</span>
            </div>
            <div class="product-info">
                <i class="fas fa-layer-group"></i>
                <span>{{ product.category.name }}</span>
            </div>

{#            {% if product.rating %}#}
{#            <div class="product-info">#}
{#                <i class="fas fa-star"></i>#}
{#                <span>{{ product.rating|floatformat:1 }} ({{ product.review_count }})</span>#}
{#            </div>#}
{#            {% endif %}#}
        </div>
        <div class="product-actions1">
            <a href="{% url 'products:product_detail' product.slug %}" class="btn btn-primary">{% trans "عرض التفاصيل" %}</a>
            {% if product.in_stock %}
            <form action="{% url 'cart:add_to_cart' product.id %}" method="post" class="d-inline add-to-cart-form">
                {% csrf_token %}
                <input type="hidden" name="product_id" value="{{ product.id }}">
                <input type="hidden" name="quantity" value="1">
                <button type="submit" class="btn btn-outline-primary">{% trans "إضافة للسلة" %}</button>
            </form>
            {% endif %}

        </div>
    </div>
</div>