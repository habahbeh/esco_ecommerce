{% load i18n static %}
{% load humanize %}

<!-- File: products/templates/products/base/_product_card.html -->
<!-- بطاقة منتج بتصميم مشابه لموقع أمازون -->

{% load i18n static %}
{% load humanize %}

<!-- File: products/templates/products/base/_product_card.html -->
<!-- بطاقة منتج بتصميم مشابه لبطاقة الفعاليات -->

<div class="card product-card h-100">
    {% if product.is_new %}
        <div class="product-badge-new">{% trans "جديد" %}</div>
    {% elif product.is_featured %}
        <div class="product-badge-featured">{% trans "مميز" %}</div>
    {% elif product.has_discount %}
        <div class="product-badge-sale">-{{ product.discount_percentage }}%</div>
    {% endif %}

    <div class="product-image-container">
        {% if product.default_image %}
            <img src="{{ product.default_image.image.url }}" alt="{{ product.name }}">
        {% else %}
            <i class="far fa-image fa-3x text-muted"></i>
        {% endif %}
    </div>

    <div class="card-body">
        <h3 class="card-title">
            {% if LANGUAGE_CODE == 'en' %}
                {{ product.name_en }}
            {% else %}
                {{ product.name }}
            {% endif %}
        </h3>
        <div class="product-details">
            <div class="product-info">
                <i class="fas fa-tag"></i>
                <span>{{ product.current_price|floatformat:2 }} {% trans "د.أ" %}</span>
            </div>
            <div class="product-info">
                <i class="fas fa-layer-group"></i>
                {% if LANGUAGE_CODE == 'en' %}
                    {{ product.category.name_en }}
                {% else %}
                    {{ product.category.name }}
                {% endif %}
                </span>
            </div>

{#            {% if product.rating %}#}
{#            <div class="product-info">#}
{#                <i class="fas fa-star"></i>#}
{#                <span>{{ product.rating|floatformat:1 }} ({{ product.review_count }})</span>#}
{#            </div>#}
{#            {% endif %}#}
        </div>
        <div class="product-actions">
            {% get_current_language as CURRENT_LANGUAGE %}
            <a href="{% if CURRENT_LANGUAGE == 'en' %}/en{% endif %}{% url 'products:product_detail' product.slug %}" class="btn btn-primary">{% trans "عرض التفاصيل" %}</a>
{#            {% if product.in_stock %}#}
{#            <form action="{% url 'cart:add_to_cart' product.id %}" method="post" class="d-inline add-to-cart-form1">#}
{#                {% csrf_token %}#}
{#                <input type="hidden" name="product_id" value="{{ product.id }}">#}
{#                <input type="hidden" name="quantity" value="1">#}
{#                <button type="submit" class="btn btn-outline-primary">{% trans "إضافة للسلة" %}</button>#}
{#            </form>#}
{#            {% endif %}#}

        </div>
    </div>
</div>